{% extends 'base.html' %}

{% block title %}جميع المدونات{% endblock %}

{% block content %}
<div class="container blog-page">
  <header class="page-header">
    <h1 class="page-title">جميع المدونات</h1>
    <a href="{{ url_for('main_routes.create_blog') }}" class="btn add-blog-btn">+ إضافة مدونة جديدة</a>

    <!-- نموذج زر حذف جميع المدونات مع تأكيد قبل التنفيذ -->
    <form action="{{ url_for('main_routes.delete_all_blogs') }}" method="post" onsubmit="return confirm('هل أنت متأكد من حذف جميع المدونات؟');" style="margin-top: 20px;">
        <button type="submit" class="btn delete-all-btn">حذف جميع المدونات</button>
    </form>
  </header>
  
  <section class="blog-grid">
    {% for blog in blogs %}
    <article class="blog-card">
      <!-- صورة المقالة كخلفية -->
      <div class="blog-image" style="background-image: url('{{ blog.image_path }}');">
        <div class="overlay">
          <h2 class="blog-title">
            <a href="{{ url_for('main_routes.blog_detail', blog_id=blog.id) }}">{{ blog.title }}</a>
          </h2>
        </div>
      </div>

      <!-- محتوى المقالة داخل البطاقة -->
      <div class="blog-content">
        <div class="article-preview">
          {{ blog.content | safe }}  <!-- عرض النص المنسق بدون قص -->
        </div>
        <a href="{{ url_for('main_routes.blog_detail', blog_id=blog.id) }}" class="btn read-more-btn">قراءة المزيد</a>
      </div>
    </article>
    {% endfor %}
  </section>
</div>
{% endblock %}
