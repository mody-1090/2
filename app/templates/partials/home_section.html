<!-- templates/partials/home_section.html -->
<div class="section" id="homeSection">
    <!-- ğŸ”” Ù‚Ø³Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <h3 class="section-header">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
    <div class="card shadow mb-4 creative-card">
      <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
        <h4 class="mb-0"><i class="bi bi-bell"></i> Ø¥Ø´Ø¹Ø§Ø±Ø§ØªÙƒ</h4>
        <span class="text-muted">ğŸ“Œ Ø£Ø­Ø¯Ø« 5 Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
      </div>
      <div class="card-body table-responsive creative-table">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
              <th>ğŸ“¢ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</th>
            </tr>
          </thead>
          <tbody>
            {% set notifications = user.notifications | sort(attribute='created_at', reverse=True) %}
            {% for notification in notifications[:5] %}
            <tr>
              <td>{{ notification.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
              <td>{{ notification.message }}</td>
            </tr>
            {% endfor %}
            {% if notifications | length == 0 %}
            <tr>
              <td colspan="2" class="text-center">ğŸš€ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©.</td>
            </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  
    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
    <table class="table creative-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Ø§Ø³Ù… Ø§Ù„Ø·Ù„Ø¨</th>
          <th>Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</th>
          <th>Ù…Ù„Ù Ø§Ù„Ø·Ù„Ø¨ÙŠØ©</th>
        </tr>
      </thead>
      <tbody>
        {% for order, participant in participant_orders %}
          {% if participant.cartons_requested == 0 %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ order.name }}</td>
            <td>{{ participant.status }}</td>
            <td>
              {% if order.zip_file_path %}
                <a href="{{ order.zip_file_path }}" class="btn btn-primary btn-sm creative-btn" target="_blank">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</a>
              {% else %}
                <span class="text-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù</span>
              {% endif %}
            </td>
          </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>
  
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ -->
    <div class="support-section creative-support">
      <h2>ğŸ”¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h2>
      <p>Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙˆØ§Ø¬Ù‡ Ù…Ø´ÙƒÙ„Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­ ØªØ°ÙƒØ±Ø© Ø¯Ø¹Ù… ÙÙ†ÙŠ.</p>
      <a href="{{ url_for('main_routes.intermediary_support') }}" class="btn btn-primary creative-btn">ÙØªØ­ ØªØ°ÙƒØ±Ø© Ø¯Ø¹Ù…</a>
    </div>
  
    <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ -->
    <h3 class="section-header">ğŸ’° Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
    <div class="row creative-earnings">
      <!-- Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø­Ù‚Ù‚Ø© -->
      <div class="col-md-4">
        <div class="card text-white bg-success mb-3 creative-card">
          <div class="card-header">ğŸ’° Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©</div>
          <div class="card-body">
            <h5 class="card-title">{{ total_earnings }} Ø±ÙŠØ§Ù„</h5>
            <p class="card-text">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº Ù…ØªØ§Ø­ Ù„Ù„Ø³Ø­Ø¨.</p>
          </div>
        </div>
      </div>
      <!-- Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© -->
      <div class="col-md-4">
        <div class="card text-white bg-warning mb-3 creative-card">
          <div class="card-header">â³ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
          <div class="card-body">
            <h5 class="card-title">{{ pending_earnings }} Ø±ÙŠØ§Ù„</h5>
            <p class="card-text">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„.</p>
          </div>
        </div>
      </div>
      <!-- Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø© -->
      <div class="col-md-4">
        <div class="card text-white bg-info mb-3 creative-card">
          <div class="card-header">âœ… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø©</div>
          <div class="card-body">
            <h5 class="card-title">{{ withdrawn_earnings }} Ø±ÙŠØ§Ù„</h5>
            <p class="card-text">ØªÙ… ØªØ­ÙˆÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº Ø¥Ù„ÙŠÙƒ.</p>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ -->
    <h3 class="section-header">ğŸ’° Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</h3>
    <div class="card shadow mb-4 creative-card">
      <div class="card-header bg-info text-white">
        <h4 class="mb-0"><i class="bi bi-clock-history"></i> Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</h4>
      </div>
      <div class="card-body table-responsive creative-table">
        <table class="table table-hover align-middle">
          <thead>
            <tr>
              <th>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</th>
              <th>ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº</th>
              <th>ğŸ¦ Ø§Ù„Ø¨Ù†Ùƒ</th>
              <th>ğŸ’³ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th>
              <th>ğŸ”¢ Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†</th>
              <th>âœ… Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr>
          </thead>
          <tbody>
            {% for request in withdrawal_requests %}
            <tr>
              <td>{{ request.created_at.strftime('%Y-%m-%d') }}</td>
              <td>{{ request.amount }} Ø±ÙŠØ§Ù„</td>
              <td>{{ request.bank_name }}</td>
              <td>{{ request.account_number }}</td>
              <td>{{ request.iban_number }}</td>
              <td>
                {% if request.status == "pending" %}
                  <span class="badge bg-warning">â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
                {% elif request.status == "approved" %}
                  <span class="badge bg-success">âœ… Ù…Ù‚Ø¨ÙˆÙ„</span>
                {% else %}
                  <span class="badge bg-danger">âŒ Ù…Ø±ÙÙˆØ¶</span>
                {% endif %}
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="6" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  
    <!-- Ø²Ø± Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ -->
    <button type="button" class="btn btn-primary creative-btn" data-bs-toggle="modal" data-bs-target="#withdrawModal">
      ğŸ’° Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
    </button>
  
    <!-- Ù†Ø§ÙØ°Ø© ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ -->
    <div class="modal fade creative-modal" id="withdrawModal" tabindex="-1" aria-labelledby="withdrawModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content creative-modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="withdrawModalLabel">Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¥ØºÙ„Ø§Ù‚"></button>
          </div>
          <div class="modal-body">
            <form method="POST" action="{{ url_for('main_routes.request_withdrawal') }}">
              {{ form.hidden_tag() }}
              <!-- ğŸ”¹ Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ -->
              <div class="mb-3">
                <label class="form-label">ğŸ‘¤ Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨</label>
                {{ form.account_holder(class="form-control", placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨") }}
              </div>
              <!-- ğŸ”¹ Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ -->
              <div class="mb-3">
                <label class="form-label">ğŸ¦ Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</label>
                {{ form.bank_name(class="form-control", placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ") }}
              </div>
              <!-- ğŸ”¹ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ -->
              <div class="mb-3">
                <label class="form-label">ğŸ’³ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ</label>
                {{ form.account_number(class="form-control", placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨") }}
              </div>
              <!-- ğŸ”¹ Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù† -->
              <div class="mb-3">
                <label class="form-label">ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†</label>
                {{ form.iban_number(class="form-control", placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†") }}
              </div>
              <!-- ğŸ”¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø³Ø­Ø¨Ù‡ -->
              <div class="mb-3">
                <label class="form-label">ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø³Ø­Ø¨Ù‡</label>
                <input type="number" class="form-control" name="amount" value="{{ total_earnings }}" readonly>
              </div>
              <!-- Ø²Ø± ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ -->
              {{ form.submit(class="btn btn-success w-100 creative-btn") }}
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ -->
  <style>
    /* Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
    .section-header {
      font-size: 2rem;
      margin: 2rem 0 1rem;
      text-align: center;
      color: #0044CC;
    }
    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¸Ù„ ÙˆØ§Ù„Ø­ÙˆØ§Ù Ø§Ù„Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    .creative-card {
      border-radius: 15px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .creative-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }
    /* ØªØ­Ø³ÙŠÙ† ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    .creative-table table {
      border-collapse: separate;
      border-spacing: 0 10px;
    }
    .creative-table th,
    .creative-table td {
      vertical-align: middle;
    }
    /* Ø£Ø²Ø±Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠØ© Ø¨ØªØ£Ø«ÙŠØ± Ù†Ø§Ø¹Ù… */
    .creative-btn {
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .creative-btn:hover {
      background-color: #003399;
      transform: translateY(-3px);
    }
    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù€ modal */
    .creative-modal-content {
      border-radius: 15px;
      overflow: hidden;
    }
    /* Ù‚Ø³Ù… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ */
    .creative-support {
      margin: 3rem 0;
      text-align: center;
      background: #f0f8ff;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }
  </style>
  
