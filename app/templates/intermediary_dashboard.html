{% extends "base1.html" %}
{% block title %}لوحة تحكم الوسيط{% endblock %}
{% block content %}
<div class="container-fluid p-4">
  <!-- عنوان الصفحة -->
  <div class="row mb-4">
    <div class="col text-center">
      <h2 class="display-5">🎯 لوحة تحكم الوسيط - {{ user.username }}</h2>
    </div>
  </div>
  <div class="row">
    <!-- الشريط الجانبي للتنقل -->
    <div class="col-md-3 mb-4">
      <div class="list-group shadow">
        <a href="#" class="list-group-item list-group-item-action active" data-section="home_section"> 
          <i class="bi bi-speedometer2"></i> الرئيسية
        </a>
        <a href="#" class="list-group-item list-group-item-action" data-section="orders_section">
          <i class="bi bi-card-list"></i> الطلبات
        </a>
        <a href="#" class="list-group-item list-group-item-action" data-section="add_order_section">
          <i class="bi bi-plus-circle"></i> ابدا تجارتك
        </a>
      </div>
    </div>
    <!-- المحتوى الرئيسي الذي سيتم تحميله ديناميكيًا -->
    <div class="col-md-9" id="content-area">
      <!-- سيتم تحميل المحتوى هنا عند اختيار القسم -->
    </div>
  </div>
</div>

<script>
  // دالة لتحميل القسم المطلوب عبر AJAX
  function loadSection(section) {
    let endpoint = "/dashboard/" + section;
    fetch(endpoint)
      .then(response => response.text())
      .then(html => {
        document.getElementById("content-area").innerHTML = html;
      })
      .catch(error => console.error("Error loading section:", error));
  }

  document.addEventListener("DOMContentLoaded", function() {
    // تحميل القسم الافتراضي (الرئيسية) عند فتح الصفحة
    loadSection("home_section");

    // إضافة مستمعي النقر لعناصر القائمة الجانبية
    const navLinks = document.querySelectorAll(".list-group-item");
    navLinks.forEach(link => {
      link.addEventListener("click", function(e) {
        e.preventDefault();
        navLinks.forEach(l => l.classList.remove("active"));
        this.classList.add("active");
        let section = this.getAttribute("data-section");
        loadSection(section);
      });
    });
  });
</script>
{% endblock %}
