{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header bg-primary text-white text-center">
      <h4 class="mb-0">
        <i class="bi bi-file-earmark-text"></i> ุงุชูุงููุฉ ุชูููุฐ ุทูุจูุฉ
      </h4>
    </div>
    <div class="card-body">
      <!-- ุชูุงุตูู ุงูุงุชูุงููุฉ ูุนุฑุถ ุงููุนูููุงุช ุงูุฃุฎุฑู ุชุจูู ุฏูู ุชุบููุฑ -->
      <p><strong>๐ ุงูุทุฑู ุงูุฃูู:</strong> ููุตุฉ "ุฌููุฉ" (ููุดุงุฑ ุฅูููุง ุจู "ุงูููุตุฉ").</p>
      <p><strong>๐ ุงูุทุฑู ุงูุซุงูู:</strong> {{ agreement.company_name }}ุ ุณุฌู ุชุฌุงุฑู ุฑูู [ุฅุถุงูุฉ ุฑูู ุงูุณุฌู ูุงุญููุง].</p>
      <!-- ุจุงูู ุชูุงุตูู ุงูุงุชูุงููุฉ ... -->
      <h5 class="mt-4">1. ููุถูุน ุงูุงุชูุงู</h5>
      <ul>
        <li>๐ฆ <strong>ุฑูู ุงูุทูุจูุฉ:</strong> {{ agreement.order.id }}</li>
        <li>๐ <strong>ููุน ุงูููุชุฌ:</strong> {{ agreement.order.name }}</li>
        <li>๐ <strong>ุงููููุฉ ุงููุทููุจุฉ:</strong> {{ agreement.order.quantity_needed }} ูุฑุชูู</li>
        <li>๐ฐ <strong>ุณุนุฑ ุงููุฑุชูู ุดุงูู ุงูุถุฑูุจุฉ (15%):</strong> {{ agreement.order.price_per_carton }} ุฑูุงู</li>
        <li>๐ฐ <strong>ุฅุฌูุงูู ูููุฉ ุงูุทูุจูุฉ:</strong> {{ agreement.order.total_price }} ุฑูุงู</li>
        <li>๐ฐ <strong>ุงูุนูููุฉ ุงููุณุชุญูุฉ ููููุตุฉ:</strong> {{ agreement.commission }} ุฑูุงู ููู ูุฑุชูู</li>
      </ul>

      <h5 class="mt-4">2. ุชูุงุตูู ุงูุญุณุงุจ ุงููุงูู ููู ูุฑุชูู</h5>
      <ul>
        <li>๐ต <strong>ุงููุจูุบ ูุจู ุงูุถุฑูุจุฉ:</strong> {{ "%.2f"|format(agreement.order.price_per_carton / 1.15) }} ุฑูุงู</li>
        <li>๐งพ <strong>ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (15%):</strong> {{ "%.2f"|format(agreement.order.price_per_carton - (agreement.order.price_per_carton / 1.15)) }} ุฑูุงู</li>
        <li>๐ฐ <strong>ุนูููุฉ ุงูููุตุฉ:</strong> {{ agreement.commission }} ุฑูุงู ููู ูุฑุชูู</li>
        <li>๐ฆ <strong>ุงูุตุงูู ุงูุฐู ูุญุตู ุนููู ุงูููุฑุฏ:</strong> {{ "%.2f"|format((agreement.order.price_per_carton / 1.15) - agreement.commission) }} ุฑูุงู ููู ูุฑุชูู</li>
      </ul>

      <h5 class="mt-4">3. ุขููุฉ ุงูุฏูุน</h5>
      <ul>
        <li>๐ ูุชู ุชุญููู ูุจูุบ ุงูุทูุจูุฉ ูู ุงูุนููุงุก ูุจุงุดุฑุฉ ุฅูู ุญุณุงุจ ุงูููุฑุฏ ุฏูู ุชุฏุฎู ุงูููุตุฉ.</li>
        <li>๐ฐ ููุชุฒู ุงูููุฑุฏ ุจุณุฏุงุฏ {{ agreement.commission }} ุฑูุงู ููู ูุฑุชูู ูุตุงูุญ ูุงูู ุงูููุตุฉ ูุญูุฏ ุญุณู ูุญูุฏ ุงูุญุฑุจู (ุฅุฏุงุฑุฉ ูุชูุดูุท ุงููุจูุนุงุช) ุฑูู ุชุฑุฎูุต: FL-65182703 ุจุนุฏ ุฅููุงู ุงูุทูุจูุฉ.</li>
        <li>๐ ูุชู ุฏูุน ุงูุนูููุฉ ุฎูุงู <strong>3 ุฃูุงู</strong> ูู ุชุงุฑูุฎ ุฅููุงู ุงูุทูุจูุฉ.</li>
      </ul>

      <h5 class="mt-4">7. ุงูุฃุญูุงู ุงูุนุงูุฉ</h5>
      <ul>
        <li>โ ูุนุชุจุฑ ูุฐุง ุงูุงุชูุงู ุณุงุฑููุง ุจูุฌุฑุฏ ุชุฃููุฏ ุงูุทูุจูุฉ ุนุจุฑ ุงูููุตุฉ.</li>
        <li>โ๏ธ ุฃู ูุฒุงุน ูุชู ุญูู ุจุงูุชูุงูุถ ุงููุจุงุดุฑุ ูุฅู ุชุนุฐุฑ ุฐูู ูุชู ุงููุฌูุก ุฅูู ุงูุฌูุงุช ุงููุฎุชุตุฉ.</li>
      </ul>

      {% if agreement.status == "approved" %}
      <div class="alert alert-success mt-4">
        โ ุชู ุงูููุงููุฉ ุนูู ุงูุงุชูุงููุฉ ูู {{ agreement.approval_date.strftime('%Y-%m-%d') }}
        <br> โ <strong>ุงููููุน:</strong> {{ agreement.signatory_name }} - {{ agreement.signatory_title }}
      </div>
      {% else %}
      <div class="mt-4 p-3 bg-light border rounded">
        <form method="POST" action="{{ url_for('main_routes.approve_factory_agreement', agreement_id=agreement.id) }}">
          {{ form.hidden_tag() }}
          
          <div class="mb-3">
            <label for="{{ form.signatory_name.id }}" class="form-label">๐ ุงุณู ุงููููุน ุงูุฑุณูู</label>
            {{ form.signatory_name(class="form-control", id=form.signatory_name.id, placeholder="ุฃุฏุฎู ุงุณู ุงููููุน ุงูุฑุณูู") }}
          </div>

          <div class="mb-3">
            <label for="{{ form.signatory_title.id }}" class="form-label">๐ท๏ธ ุงูุตูุฉ (ูุงููุ ูุฏูุฑุ ุฅูุฎ)</label>
            {{ form.signatory_title(class="form-control", id=form.signatory_title.id, placeholder="ุฃุฏุฎู ุงูุตูุฉ") }}
          </div>

          <!-- ุงูุญููู ุงููุฎููุฉ ุชูุฏุฑุฌ ุชููุงุฆููุง -->
          {{ form.bank_name }}
          {{ form.bank_account_number }}
          {{ form.iban_number }}
          {{ form.commercial_registration }}
          
          <button type="submit" class="btn btn-success">
            <i class="bi bi-check-circle"></i> {{ form.submit.label.text }}
          </button>
        </form>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
