{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header bg-primary text-white text-center">
      <h4 class="mb-0">
        <i class="bi bi-file-earmark-text"></i> ุงุชูุงููุฉ ุชูููุฐ ุทูุจูุฉ
      </h4>
    </div>
    <div class="card-body">
      <p><strong>๐ ุงูุทุฑู ุงูุฃูู:</strong> ุดุฑูุฉ ูุญูุฏ ุญุณู ูุญูุฏ ุงูุญุฑุจู ูุชุฌุงุฑุฉ ุงูุฌููุฉ ูุงูุชุฌุฒุฆุฉุ ุงูุณุฌู ุงูุชุฌุงุฑู 109193632.</p>
      <p><strong>๐ ุงูุทุฑู ุงูุซุงูู:</strong> {{ agreement.company_name }}.</p>
      
      <h5 class="mt-4">1. ุชูุงุตูู ุฃูุฑ ุงูุดุฑุงุก</h5>
      <ul>
        <li>๐ฆ <strong>ุฑูู ุงูุทูุจูุฉ:</strong> {{ agreement.order.id }}</li>
        <li>๐ <strong>ููุน ุงูููุชุฌ:</strong> {{ agreement.order.name }}</li>
        <li>๐ <strong>ุงููููุฉ ุงููุทููุจุฉ:</strong> {{ agreement.order.quantity_needed }} ูุฑุชูู</li>
        <li>๐ฐ <strong>ุฅุฌูุงูู ูููุฉ ุงูุทูุจูุฉ:</strong> {{ agreement.order.price_per_carton * agreement.order.quantity_needed }} ุฑูุงู</li>
      </ul>
      
      <h5 class="mt-4">2. ุชูุงุตูู ุงูุฏูุน</h5>
      <ul>
        <li>๐ต <strong>ุงูุณุนุฑ ููู ูุฑุชูู (ุดุงูู ุงูุถุฑูุจุฉ):</strong> {{ agreement.order.price_per_carton }} ุฑูุงู</li>
        <li>๐ฐ <strong>ุฅุฌูุงูู ุงููุจูุบ ุงููุณุชุญู:</strong> {{ agreement.order.price_per_carton * agreement.order.quantity_needed }} ุฑูุงู</li>
        <li>๐ <strong>ุชุงุฑูุฎ ุงูุทูุจ:</strong> {{ agreement.order.created_at.strftime('%Y-%m-%d') }}</li>
        <li>๐ ูุชู ุงูุฏูุน ุฎูุงู 30 ููููุง ูู ุชุงุฑูุฎ ุงูุทูุจ.</li>
      </ul>
      
      <h5 class="mt-4">3. ุดุฑูุท ุงูุชุณููู ูุงูุงุณุชูุงู</h5>
      <ul>
        <li>๐ ูุชู ุชุณููู ุงูููุชุฌุงุช ูู ุงููููุน ุงููุชูู ุนููู.</li>
        <li>โณ ููุชุฒู ุงูููุฑุฏ ุจุงูุชุณููู   ุจุนุฏ ุงุณุชูุงู ูุจูุบ ุงูุทูุจูุฉ ูุงูู .</li>
        <li>๐ ูุญู ููููุตุฉ ุฑูุถ ุฃู ููุชุฌ ูุง ูุทุงุจู ุงูููุงุตูุงุช ุงููุชูู ุนูููุง.</li>
      </ul>
      
      <h5 class="mt-4">4. ุณูุงุณุฉ ุงูุฅุฑุฌุงุน ูุงูุงุณุชุจุฏุงู</h5>
      <ul>
        <li>๐ ูุญู ููููุตุฉ ุฅุฑุฌุงุน ุงูููุชุฌุงุช ุงููุนูุจุฉ ุฎูุงู 30 ููููุง ูู ุงูุงุณุชูุงู.</li>
        <li>๐ผ ููุชุฒู ุงูููุฑุฏ ุจุงุณุชุจุฏุงู ุงูููุชุฌุงุช ุงููุนูุจุฉ ุฃู ุฅุนุงุฏุฉ ุงููุจูุบ ุฎูุงู 70 ููููุง.</li>
      </ul>
      
      <h5 class="mt-4">5. ุงูุฃุญูุงู ุงูุนุงูุฉ</h5>
      <ul>
        <li>โ ุงูุงุชูุงููุฉ ุชุนุชุจุฑ ุณุงุฑูุฉ ุจูุฌุฑุฏ ุชุฃููุฏ ุงูุทูุจ ุนุจุฑ ุงูููุตุฉ.</li>
        <li>โ๏ธ ุฃู ูุฒุงุน ูุชู ุญูู ุจุงูุชูุงูุถ ุงููุจุงุดุฑุ ูุฅู ุชุนุฐุฑ ุฐูู ูุชู ุงููุฌูุก ููุชุญููู ููู ุงูุฃูุธูุฉ ุงููุนููู ุจูุง.</li>
      </ul>
      
      {% if agreement.status == "approved" %}
      <div class="alert alert-success mt-4">
        โ ุชู ุงูููุงููุฉ ุนูู ุงูุงุชูุงููุฉ ุจุชุงุฑูุฎ {{ agreement.approval_date.strftime('%Y-%m-%d') }}
        <br> โ <strong>ุงููููุน:</strong> {{ agreement.signatory_name }} - {{ agreement.signatory_title }}
      </div>
      {% else %}
      <div class="mt-4 p-3 bg-light border rounded">
        <form method="POST" action="{{ url_for('main_routes.approve_factory_agreement', agreement_id=agreement.id) }}">
          {{ form.hidden_tag() }}
          
          <div class="mb-3">
            <label for="{{ form.signatory_name.id }}" class="form-label">๐ ุงุณู ุงููููุน ุงูุฑุณูู</label>
            {{ form.signatory_name(class="form-control", id=form.signatory_name.id, placeholder="ุฃุฏุฎู ุงุณู ุงููููุน ุงูุฑุณูู") }}
          </div>

          <div class="mb-3">
            <label for="{{ form.signatory_title.id }}" class="form-label">๐ท๏ธ ุงูุตูุฉ (ูุงููุ ูุฏูุฑุ ุฅูุฎ)</label>
            {{ form.signatory_title(class="form-control", id=form.signatory_title.id, placeholder="ุฃุฏุฎู ุงูุตูุฉ") }}
          </div>

          <button type="submit" class="btn btn-success">
            <i class="bi bi-check-circle"></i> {{ form.submit.label.text }}
          </button>
        </form>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
